<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Interswitch Payment Gateway</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
      <script src="../javascripts/all.js" type="text/javascript"></script>
  </head>

  <body class="webpay webpay_index" data-languages="[&quot;go&quot;,&quot;java&quot;,&quot;javascript&quot;,&quot;python&quot;,&quot;ruby&quot;,&quot;csharp&quot;,&quot;c&quot;,&quot;objective_c&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <a href="#" id="hide-button">
      <span>
        <span class="hide-text"></span>
        <img src="../images/hide.png" />
      </span>
    </a>
    
    <div class="tocify-wrapper">
      <img src="../images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="go">Go</a>
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="javascript">JavaScript</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="csharp">C#</a>
              <a href="#" data-language-name="c">Swift</a>
              <a href="#" data-language-name="objective_c">Objective-C</a>
              <a href="#" data-language-name="php">PHP</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id=""> Interswitch Payment Gateway </h1>

<blockquote>
<p>Scroll down for code samples, Sample requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.</p>
</blockquote>

<p>This document describes how a third-party will request for Interswitch Payment Gateway API. Note that all data formats and response definitions are in conformance with the REST standard.</p>

<p>Interswitch payment gateway is a product for businesses who would like to accept payments online and on mobile devices. </p>

<p>If you are a certified and regulated payment processor who would like to provide your own payment gateway, this payment gateway makes available a processing API with which you can process both local and international card payments for businesses in Nigeria, Kenya, Uganda and Gambia. </p>

<p>For more information about these possibilities, please send an email to <a href="mailto:ipgsupport@interswitchgroup.com">ipgsupport@interswitchgroup.com</a></p>

<h1 id="getting-access-token"> Getting Access Token </h1>

<p>To begin the using the platform, you must register for an account on the <a href="https://www.interswitchgroup.com/paymentgateway/">Interswitch Payment Gateway portal</a>. </p>

<p>Please follow the registration process and you&rsquo;d be redirected to the platform.</p>

<h1 id="-default">APIs Currently Enrolled</h1>

<p>The following APIs are avaiable for us and have been categorised for ease of access as follows below:</p>

<ul>
<li><a href="#basic-purchase">Basic Purchase</a></li>
<li><a href="#">OTP Purchase</a></li>
<li><a href="#payment-token">Payment Token Purchase</a></li>
<li>VISA Cardinal Transaction (NoPIN)</li>
<li>Auto Enrollment (M0 Transaction)</li>
<li>Card Validation (Adding Card)</li>
<li>Recurring Payments</li>
</ul>

          <h1 id="-default-notes"> Notes </h1>
<h2 id='endpoints'>Endpoints</h2>
<p>Base endpoints for this documentation can be referenced from this table:</p>

<table><thead>
<tr>
<th>Function</th>
<th>Sandbox</th>
<th>Production</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Passport / Access Token</strong></td>
<td>https://sandbox.interswitchng.com</td>
<td>https://passport.interswitchng.com</td>
</tr>
<tr>
<td><strong>Transactions and Purchases</strong></td>
<td>https://sandbox.interswitchng.com</td>
<td>https://saturn.interswitchng.com</td>
</tr>
<tr>
<td><strong><em>Querying Transaction Status using Webpay</em></strong> <br \> Reference API docs <a href="#opIdGET_collections-api-v1-gettransaction-json">here</a></td>
<td>https://sandbox.interswitchng.com</td>
<td>https://webpay.interswitchng.com</td>
</tr>
<tr>
<td><strong><em>Visa Transactions</em></strong></td>
<td>All endpoints are returned in the purchase response</td>
<td>Ditto</td>
</tr>
</tbody></table>
<h2 id='authdata'>AuthData</h2>
<blockquote>
<p>Code Samples are in Java</p>
</blockquote>
<pre class="highlight java">  <span class="n">String</span> <span class="n">authDataVersion</span> <span class="o">=</span> <span class="s">"1"</span><span class="o">;</span>
  <span class="n">String</span> <span class="n">pan</span> <span class="o">=</span> <span class="s">"5060990580000217499"</span><span class="o">;</span>        <span class="c1">// Payment Card</span>
  <span class="n">String</span> <span class="n">expiryDate</span> <span class="o">=</span> <span class="s">"2004"</span><span class="o">;</span>                <span class="c1">//Card Expiry date: April (04), 2020 (20) - YYMM</span>
  <span class="n">String</span> <span class="n">cvv2</span> <span class="o">=</span> <span class="s">"111"</span><span class="o">;</span>                       <span class="c1">// Card CVV2</span>
  <span class="n">String</span> <span class="n">pin</span> <span class="o">=</span> <span class="s">"1111"</span><span class="o">;</span>                       <span class="c1">// Card pin</span>
  <span class="n">String</span> <span class="n">authData</span> <span class="o">=</span> <span class="n">getAuthData</span><span class="o">(</span><span class="n">authDataVersion</span><span class="o">,</span> <span class="n">pan</span><span class="o">,</span> <span class="n">pin</span><span class="o">,</span> <span class="n">expiryDate</span><span class="o">,</span> <span class="n">cvv2</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"AuthData : "</span> <span class="o">+</span> <span class="n">authData</span><span class="o">);</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">getAuthData</span><span class="o">(</span><span class="n">String</span> <span class="n">version</span><span class="o">,</span> <span class="n">String</span> <span class="n">pan</span><span class="o">,</span> <span class="n">String</span> <span class="n">pin</span><span class="o">,</span> <span class="n">String</span> <span class="n">expiryDate</span><span class="o">,</span> <span class="n">String</span> <span class="n">cvv2</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">authData</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">authDataCipher</span> <span class="o">=</span> <span class="n">version</span> <span class="o">+</span> <span class="s">"Z"</span> <span class="o">+</span> <span class="n">pan</span> <span class="o">+</span> <span class="s">"Z"</span> <span class="o">+</span> <span class="n">pin</span> <span class="o">+</span> <span class="s">"Z"</span> <span class="o">+</span> <span class="n">expiryDate</span> <span class="o">+</span> <span class="s">"Z"</span> <span class="o">+</span> <span class="n">cvv2</span><span class="o">;</span>
        <span class="c1">// The Modulus and Public Exponent will be supplied by Interswitch. please ask for one</span>
        <span class="n">String</span> <span class="n">modulus</span> <span class="o">=</span> <span class="s">"XXXXXXX"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">publicExponent</span> <span class="o">=</span> <span class="s">"XXXXXXX"</span><span class="o">;</span>
        <span class="n">Security</span><span class="o">.</span><span class="na">addProvider</span><span class="o">(</span><span class="k">new</span> <span class="n">BouncyCastleProvider</span><span class="o">());</span>
        <span class="n">RSAPublicKeySpec</span> <span class="n">publicKeyspec</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RSAPublicKeySpec</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">modulus</span><span class="o">,</span> <span class="mi">16</span><span class="o">),</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">publicExponent</span><span class="o">,</span> <span class="mi">16</span><span class="o">));</span>
        <span class="n">KeyFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">KeyFactory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"RSA"</span><span class="o">);</span> <span class="c1">//, "JHBCI");</span>
        <span class="n">PublicKey</span> <span class="n">publicKey</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">generatePublic</span><span class="o">(</span><span class="n">publicKeyspec</span><span class="o">);</span>
        <span class="n">Cipher</span> <span class="n">encryptCipher</span> <span class="o">=</span> <span class="n">Cipher</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"RSA/ECB/PKCS1Padding"</span><span class="o">,</span> <span class="s">"BC"</span><span class="o">);</span>
        <span class="n">encryptCipher</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">Cipher</span><span class="o">.</span><span class="na">ENCRYPT_MODE</span><span class="o">,</span> <span class="n">publicKey</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">authDataBytes</span> <span class="o">=</span> <span class="n">encryptCipher</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">authDataCipher</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF8"</span><span class="o">));</span>
        <span class="n">authData</span> <span class="o">=</span> <span class="n">Base64</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">().</span><span class="na">encodeToString</span><span class="o">(</span><span class="n">authDataBytes</span><span class="o">).</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">"\\r|\\n"</span><span class="o">,</span> <span class="s">""</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">authData</span><span class="o">;</span>
    <span class="o">}</span>
</pre>

<p>AuthData is a combination of your payment’s sensitive data mainly: </p>

<ul>
<li>PAN</li>
<li>PIN</li>
<li>Expiry Date</li>
<li>CVV2</li>
<li>Auth Data Version <strong><em>by default, 1</em></strong></li>
</ul>

<p>The BouncyCastle library is required for this.</p>

<p>Kindly download the appropriate BouncyCastle library for your platform.  </p>

<p>You will also be provided with a public key exponent as well as a modulus.</p>

<p>For more information about these possibilities, please send an email to <a href="mailto:ipgsupport@interswitchgroup.com">ipgsupport@interswitchgroup.com</a></p>
<h2 id='nonce'>Nonce</h2>
<blockquote>
<p>Sample implementation in PHP</p>
</blockquote>
<pre class="highlight php">
function nonce()
{
     return substr(str_shuffle(MD5(microtime())), 0, 20);
}
</pre>

<p>Nonce is a unique generated value for each request. It should not be repeated, i.e. a unique nonce should be sent for each and every request. Length of the nonce should NOT be more than 64 characters.</p>
<h2 id='transaction-references'>Transaction References</h2>
<p><a id="transaction-references"></a></p>

<blockquote>
<p>Implementation</p>
</blockquote>
<pre class="highlight plaintext">    JB-{{Insert Timestamp here}}-{{Transaction Type}}

    Transaction can have the formats of either one of the types declared below:

    // For transactions that do not require OTP authentication
    - NoOTP  

    // For transactions that require OTP authentication
    - OTPPurchase 

    //For VISA transaction
    - VISA 

    //For enrolling cards to use OTP for authentication
    - Enrol 

    //Used to obtain the token for  a recurring transaction
    - ReccValid

    //Used to make a recurrent purchase [Requires a token]
    - ReccPurch


    For Sample, JB-124334323-OTPPurchase
</pre>

<p>This is used to state what type of transaction you&rsquo;d be performing.</p>

<p>Generally, it has a format as shown on the other side.</p>

<p>Using this format is not compulsory but it does aid in debugging fail transactions and assessing what kind is being used.</p>

          <h2 id='getting-a-bearer-token'>Getting a Bearer Token</h2>
<p><a id="opIdPOST_passport-oauth-token"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"application/x-www-form-urlencoded"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/passport/oauth/token"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/passport/oauth/token"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
</pre>
<pre class="highlight php">
<span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/passport/oauth/token"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: application/x-www-form-urlencoded"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>
</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/passport/oauth/token"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/x-www-form-urlencoded"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/x-www-form-urlencoded"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Authorization&gt;&gt;"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/passport/oauth/token"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/passport/oauth/token"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Authorization&gt;&gt;'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/passport/oauth/token'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Authorization&gt;&gt;'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/passport/oauth/token'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Authorization&gt;&gt;'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/passport/oauth/token'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /passport/oauth/token</code></p>

<p>Before making any request, you&rsquo;re required to generate a Bearer token using this endpoint. This will be the new Authorization header value when making a request.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight yaml"><span class="s">grant_type</span><span class="pi">:</span> <span class="s">client_credentials</span>

</pre>

<h3 id="post_passport-oauth-token-headers">Headers</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/x-www-form-urlencoded</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The content here is a basic token coupled with the Base64 encoding of the string combination of the client ID and the secret key: <br > <strong><em>Basic Base64(clientId+&ldquo;:&rdquo;+secretKey)</em></strong></td>
</tr>
</tbody></table>

<h3 id="post_passport-oauth-token-body">Request Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>grant_type</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>By default, use <strong><em>client_credentials</em></strong> as its value</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Sample</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;ACCESS_TOKEN&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"profile"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MX187"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"production_payment_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00164639854"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"requestor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00117614992"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payable_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2324"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"042594130246"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"jti"</span><span class="p">:</span><span class="w"> </span><span class="s2">"487a338b-3290-4184-ad48-28a28f3838b6"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="post_passport-oauth-token-responses">Response Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>response</td>
<td>string</td>
<td>This is the bearer token that will be used in your transaction</td>
</tr>
<tr>
<td>token_type</td>
<td>response</td>
<td>string</td>
<td>Default is <strong><em>Bearer</em></strong></td>
</tr>
<tr>
<td>scope</td>
<td>response</td>
<td>string</td>
<td>Default is <strong><em>profile</em></strong></td>
</tr>
<tr>
<td>merchant_code</td>
<td>response</td>
<td>string</td>
<td>This is the short string representing your business identity</td>
</tr>
<tr>
<td>production_payment_code</td>
<td>response</td>
<td>string</td>
<td>Your merchant payment code</td>
</tr>
<tr>
<td>requestor_id</td>
<td>response</td>
<td>string</td>
<td>Your requestor identity code</td>
</tr>
<tr>
<td>payable_id</td>
<td>response</td>
<td>string</td>
<td>none</td>
</tr>
<tr>
<td>payment_code</td>
<td>response</td>
<td>string</td>
<td>none</td>
</tr>
<tr>
<td>jti</td>
<td>response</td>
<td>string</td>
<td>none</td>
</tr>
</tbody></table>

<h3 id="post_passport-oauth-token-responseschema">Response Schema</h3>

<p><aside class="warning">
This operation requires authentication using the <strong><em>Basic Authorization</em></strong> header
</aside></p>

          <h1 id='signatures'>Signatures</h1>
<blockquote>
<p>Request header sample is in JSON</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Authorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;ACCESS_TOKEN&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1361281946"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"634968823463411609"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cFwCfkgRR7mlIOlcjTQXCUYpLmtlKJkCb8RUzIX0-k="</span><span class="p">,</span><span class="w">
    </span><span class="s2">"SignatureMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHA-256"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Signature ciphers have to be generated before a request is sent. They are included in your request headers and act as a check for all requests sent to the API.</p>

<p>Different purchase requests have different signature contents. The signatures themselves are <strong><em>Base64</em></strong> encoded versions of the string combinations.</p>

<p>As you&rsquo;d notice from the request header on the right tab, the <strong><em>Signature</em></strong> contains a hash along with its <strong><em>Signature Method</em></strong>.</p>

<p>The data for which the signature can be generated from for different requests is illustrated below. The http method for the request is one of either <strong><em>POST, GET etc.</em></strong></p>
<h2 id='basic-purchase-request'>Basic Purchase Request</h2>
<blockquote>
<p>Code Samples</p>
</blockquote>
<pre class="highlight plaintext">signatureCipher = httpMethod + “&amp;”+ url + “&amp;” +timestamp + “&amp;” + nonce + “&amp;” + clientId + “&amp;” + clientSecret + “&amp;” + amount + “&amp;” + authdata
</pre>

<p>The signature can be generated from the <strong><em>Base64</em></strong> encoding of the cipher on the right.</p>
<h2 id='otp-validation-request'>OTP Validation Request</h2>
<blockquote>
<p>Code Samples</p>
</blockquote>
<pre class="highlight plaintext">signatureCipher = httpMethod + “&amp;”+ url + “&amp;” +timestamp + “&amp;” + nonce + “&amp;” + clientId + “&amp;” + clientSecret + “&amp;” + otp + “&amp;” + authdata
</pre>

<p>The signature can be generated from the <strong><em>Base64</em></strong> encoding of the cipher on the right.</p>
<h2 id='transaction-validation-request-visa'>Transaction Validation Request (VISA)</h2>
<blockquote>
<p>Code Samples</p>
</blockquote>
<pre class="highlight plaintext">signatureCipher = httpMethod + “&amp;”+ url + “&amp;” +timestamp + “&amp;” + nonce + “&amp;” + clientId + “&amp;” + clientSecret
</pre>

<p>The signature can be generated from the <strong><em>Base64</em></strong> encoding of the cipher on the right.</p>
<h2 id='card-enrollment-request'>Card Enrollment Request</h2>
<blockquote>
<p>Code Samples</p>
</blockquote>
<pre class="highlight plaintext">signatureCipher = httpMethod + “&amp;”+ url + “&amp;” +timestamp + “&amp;” + nonce + “&amp;” + clientId + “&amp;” + clientSecret
</pre>

<p>The signature can be generated from the <strong><em>Base64</em></strong> encoding of the cipher on the right.</p>

          <h1 id='purchases'>Purchases</h1>
<p>This holds APIs for all purchase and payment related endpoints covering the following post payment processes involving OTP and Pin processing.</p>
<h2 id='basic-purchasev3'>Basic Purchase[V3]</h2>
<p><a id="opIdPOST_api-v3-purchases"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/api/v3/purchases"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authkeyversion"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signaturemethod"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signature"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"nonce"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"timestamp"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span> <span class="s">"{\\"</span><span class="n">customerId</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">amount</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">authData</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">currency</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">transactionRef</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">"}"</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/api/v3/purchases"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="s2">"{\\"</span><span class="nx">customerId\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">amount\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">authData\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">currency\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">transactionRef\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">"}"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: text/plain"</span><span class="p">,</span>  
    <span class="s2">"authkeyversion: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"nonce: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signature: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signaturemethod: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"timestamp: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>

</pre>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"timestamp"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"nonce"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signature"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signaturemethod"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authkeyversion"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">parameters</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"customerId"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"amount"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"authData"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"currency"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"transactionRef"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span> <span class="p">};</span>  

<span class="n">NSData</span> <span class="o">*</span><span class="n">postData</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSJSONSerialization</span> <span class="nf">dataWithJSONObject</span><span class="p">:</span><span class="n">parameters</span> <span class="nf">options</span><span class="p">:</span><span class="mi">0</span> <span class="nf">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/api/v3/purchases"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPBody</span><span class="p">:</span><span class="n">postData</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"nonce"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signature"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signaturemethod"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authkeyversion"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  
<span class="n">let</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"customerId"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"amount"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"authData"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"currency"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"transactionRef"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span>  
<span class="p">]</span>  

<span class="n">let</span> <span class="n">postData</span> <span class="o">=</span> <span class="n">NSJSONSerialization</span><span class="p">.</span><span class="n">dataWithJSONObject</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">options</span><span class="o">:</span> <span class="n">nil</span><span class="p">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">nil</span><span class="p">)</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/api/v3/purchases"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPBody</span> <span class="o">=</span> <span class="n">postData</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>

</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"text/plain"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Access_token&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Timestamp"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Timestamp&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Nonce"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Nonce&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Signature"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Signature&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"SignatureMethod"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;SignatureMethod&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"AuthKeyVersion"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 1"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/api/v3/purchases"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/api/v3/purchases"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span><span class="err">:</span><span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span><span class="err">:</span><span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span><span class="err">:</span><span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span><span class="err">:</span><span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span><span class="err">:</span><span class="s1">' 1'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/api/v3/purchases'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'text/plain'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Nonce'</span><span class="p">:</span> <span class="s">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Signature'</span><span class="p">:</span> <span class="s">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'SignatureMethod'</span><span class="p">:</span> <span class="s">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'AuthKeyVersion'</span><span class="p">:</span> <span class="s">' 1'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/api/v3/purchases'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span> <span class="o">=&gt;</span> <span class="s1">' 1'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/api/v3/purchases'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /api/v3/purchases</code></p>

<p>This API manages an API transaction for performing debits on a user&rsquo;s card data. </p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;USER_ID&gt;&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;AMOUNT&gt;&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"authData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;AMOUNT&gt;&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NGN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JB-{{Timestamp}}-NoOTP"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre>

<h3 id="post_api-v3-purchases-parameters">Headers</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#getting-a-bearer-token">here</a> to get started on setting up a Bearer Authorization token</td>
</tr>
<tr>
<td>Timestamp</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Time the transaction was performed</td>
</tr>
<tr>
<td>Nonce</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#nonce">here</a> for more info</td>
</tr>
<tr>
<td>Signature</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#signatures">here</a> for more info</td>
</tr>
<tr>
<td>SignatureMethod</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The hashing method the signature is encoded in.</td>
</tr>
<tr>
<td>AuthKeyVersion</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>By default, <strong><em>1.0</em></strong></td>
</tr>
</tbody></table>

<h3 id="post_api-v3-purchases-parameters">Request Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customerId</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Identifier for the user e.g. email</td>
</tr>
<tr>
<td>amount</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Debitable amount on the user side</td>
</tr>
<tr>
<td>authData</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#authdata">here</a> for details on generating the authData hash</td>
</tr>
<tr>
<td>currency</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Currency code for the transaction, for now use NGN</td>
</tr>
<tr>
<td>transactionRef</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>These are used to specify the transaction type reference e.g OTP, NoOTP. Kindly check for the documentation regarding this <a href="#transaction-references">here</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Sample responses</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"transactionIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UBA|API|MX187|21-11-2018|266074|217513"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Approved by Financial Institution"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"666.66"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JB-1542785291-NoOTP"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="post_api-v3-purchases-responses">Response Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transactionIdentifier</td>
<td>response</td>
<td>string</td>
<td>This is the response code from the bank which can be used to track a successful transaction</td>
</tr>
<tr>
<td>message</td>
<td>response</td>
<td>string</td>
<td>Default should be <strong><em>Approved by Financial Institution</em></strong></td>
</tr>
<tr>
<td>amount</td>
<td>response</td>
<td>string</td>
<td>The amount of the transaction</td>
</tr>
<tr>
<td>transactionRef</td>
<td>response</td>
<td>string</td>
<td>The transaction reference initially sent in the request</td>
</tr>
</tbody></table>

<blockquote>
<p>Error responses</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;ERROR CODE&gt;&gt;"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The service provider is unreachable at the moment, please try again later."</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;TRANSACTION REF&gt;&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p><aside class="warning">
This operation requires the following details to be configured properly.
<ol> 
<li><a href="#authdata">Auth Data</a></li>
<li> <a href="#opIdPOST_passport-oauth-token">Bearer Authorization</a> must have been obtained </li>
<li> Ensure you update the signature, more details <a href="#signatures">here</a>, same for the <a href="#nonce">nonce</a>  </li></p>

<p></ol>
</aside></p>
<h2 id='recurrent-purchases-v2'>Recurrent Purchases [V2]</h2>
<p><a id="opIdPOST_api-v2-purchases-recurrents"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"timestamp"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"nonce"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signature"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signaturemethod"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authkeyversion"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">parameters</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"customerId"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"amount"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"currency"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"token"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"tokenExpiryDate"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"transactionRef"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span> <span class="p">};</span>  

<span class="n">NSData</span> <span class="o">*</span><span class="n">postData</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSJSONSerialization</span> <span class="nf">dataWithJSONObject</span><span class="p">:</span><span class="n">parameters</span> <span class="nf">options</span><span class="p">:</span><span class="mi">0</span> <span class="nf">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/api/v2/purchases/recurrents"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPBody</span><span class="p">:</span><span class="n">postData</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"nonce"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signature"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signaturemethod"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authkeyversion"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  
<span class="n">let</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"customerId"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"amount"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"currency"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"token"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"tokenExpiryDate"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"transactionRef"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span>  
<span class="p">]</span>  

<span class="n">let</span> <span class="n">postData</span> <span class="o">=</span> <span class="n">NSJSONSerialization</span><span class="p">.</span><span class="n">dataWithJSONObject</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">options</span><span class="o">:</span> <span class="n">nil</span><span class="p">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">nil</span><span class="p">)</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/api/v2/purchases/recurrents"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPBody</span> <span class="o">=</span> <span class="n">postData</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>

</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/api/v2/purchases/recurrents"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="s2">"{\\"</span><span class="nx">customerId\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">amount\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">currency\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">token\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">tokenExpiryDate\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">transactionRef\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">"}"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: text/plain"</span><span class="p">,</span>  
    <span class="s2">"authkeyversion: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"nonce: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signature: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signaturemethod: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"timestamp: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>
</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/api/v2/purchases/recurrents"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authkeyversion"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signaturemethod"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signature"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"nonce"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"timestamp"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span> <span class="s">"{\\"</span><span class="n">customerId</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">amount</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">currency</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">token</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">tokenExpiryDate</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">transactionRef</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">"}"</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"text/plain"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Access_token&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Timestamp"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Timestamp&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Nonce"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Nonce&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Signature"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Signature&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"SignatureMethod"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;SignatureMethod&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"AuthKeyVersion"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 1"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/api/v2/purchases/recurrents"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/api/v2/purchases/recurrents"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span><span class="err">:</span><span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span><span class="err">:</span><span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span><span class="err">:</span><span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span><span class="err">:</span><span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span><span class="err">:</span><span class="s1">' 1'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/api/v2/purchases/recurrents'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'text/plain'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Nonce'</span><span class="p">:</span> <span class="s">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Signature'</span><span class="p">:</span> <span class="s">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'SignatureMethod'</span><span class="p">:</span> <span class="s">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'AuthKeyVersion'</span><span class="p">:</span> <span class="s">' 1'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/api/v2/purchases/recurrents'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span> <span class="o">=&gt;</span> <span class="s1">' 1'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/api/v2/purchases/recurrents'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /api/v2/purchases/recurrents</code></p>

<p><em>Recurrent Purchase</em></p>

<p>This is used to setup a recurrent purchase which allows a biller to debit a user multiple times without additional transaction setup. The transaction details including the user&rsquo;s card details are tokenized and then sent back for future use.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CustID-{{Timestamp}}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NGN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{token}}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tokenExpiryDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{tokenExpiryDate}}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JB-{{Timestamp}}-ReccPurch"</span><span class="w">
</span><span class="p">}</span><span class="w">  

</span></pre>

<h3 id="post_api-v2-purchases-recurrents-parameters">Header Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#getting-a-bearer-token">here</a> to get started on setting up a Bearer Authorization token</td>
</tr>
<tr>
<td>Timestamp</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The current time in <a href="https://www.unixtimestamp.com/">unix timestamps</a> when the transaction happened</td>
</tr>
<tr>
<td>Nonce</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#nonce">here</a> for more info</td>
</tr>
<tr>
<td>Signature</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#signatures">here</a> for more info</td>
</tr>
<tr>
<td>SignatureMethod</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The hashing method the signature is encoded in.</td>
</tr>
<tr>
<td>AuthKeyVersion</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>By default, <strong><em>1.0</em></strong></td>
</tr>
</tbody></table>

<h3 id="post_api-v2-purchases-recurrents-request">Request Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customerId</td>
<td>body</td>
<td>string</td>
<td>The identifier you set for the customer</td>
</tr>
<tr>
<td>amount</td>
<td>body</td>
<td>string</td>
<td>The amount debited during the transaction</td>
</tr>
<tr>
<td>currency</td>
<td>body</td>
<td>string</td>
<td>Default <strong><em>NGN</em></strong></td>
</tr>
<tr>
<td>token</td>
<td>body</td>
<td>string</td>
<td>This is the key that can be used in making further recurrent transactions automatically</td>
</tr>
<tr>
<td>tokenExpiryDate</td>
<td>body</td>
<td>string</td>
<td>Time the token would expire and a reactivation would need to be done</td>
</tr>
<tr>
<td>transactionRef</td>
<td>body</td>
<td>string</td>
<td>These are used to specify the transaction type reference e.g OTP, NoOTP. Kindly check for the documentation regarding this <a href="#transaction-references">here</a></td>
</tr>
</tbody></table>

<blockquote>
<p>Error response</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;ERROR CODE&gt;&gt;"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The service provider is unreachable at the moment, please try again later."</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;TRANSACTION REF&gt;&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="post_api-v2-purchases-recurrents-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>default</td>
<td>Default</td>
<td>Default response</td>
<td>Inline</td>
</tr>
</tbody></table>

<p><aside class="warning">
This operation requires the following details to be configured properly.
<ol> 
<li> <a href="#opIdPOST_passport-oauth-token">Bearer Authorization</a> must have been obtained </li>
<li> Ensure you update the signature, more details <a href="#signatures">here</a>, same for the <a href="#nonce">nonce</a>  </li></p>

<p></ol>
</aside></p>

          <h1 id="collections"> Verify Transaction Status </h1>
<h2 id='using-ipg'>Using [IPG]</h2>
<p><a id="opIdGET_api-v3-purchases"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span><span class="p">,</span>  
                           <span class="s">@"amount"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"transactionref"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"-----------------------------------------------------------------------------------------------"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"timestamp"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"nonce"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signature"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signaturemethod"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authkeyversion"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/api/v3/purchases"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"GET"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">,</span>  
  <span class="s">"amount"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"transactionref"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>   
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"nonce"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signature"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signaturemethod"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authkeyversion"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/api/v3/purchases"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"GET"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/api/v3/purchases"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"GET"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>   
    <span class="s2">"accept: text/plain"</span><span class="p">,</span>  
    <span class="s2">"amount: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authkeyversion: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"nonce: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signature: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signaturemethod: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"timestamp: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"transactionref: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>

</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/api/v3/purchases"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authkeyversion"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signaturemethod"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signature"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"nonce"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"timestamp"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"transactionref"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"amount"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Amount"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 666.66"</span><span class="p">},</span><span class="x">
        </span><span class="s">"transactionRef"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;transactionRef&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Access_token&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Timestamp"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Timestamp&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Nonce"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Nonce&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Signature"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Signature&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"SignatureMethod"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;SignatureMethod&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"AuthKeyVersion"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 1"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span><span class="x"> </span><span class="s">"/api/v3/purchases"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/api/v3/purchases"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Amount'</span><span class="err">:</span><span class="s1">' 666.66'</span><span class="p">,</span>
  <span class="s1">'transactionRef'</span><span class="err">:</span><span class="s1">' &lt;&lt;transactionRef&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span><span class="err">:</span><span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span><span class="err">:</span><span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span><span class="err">:</span><span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span><span class="err">:</span><span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span><span class="err">:</span><span class="s1">' 1'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/api/v3/purchases'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Amount'</span><span class="p">:</span> <span class="s">' 666.66'</span><span class="p">,</span>
  <span class="s">'transactionRef'</span><span class="p">:</span> <span class="s">' &lt;&lt;transactionRef&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Nonce'</span><span class="p">:</span> <span class="s">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Signature'</span><span class="p">:</span> <span class="s">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'SignatureMethod'</span><span class="p">:</span> <span class="s">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'AuthKeyVersion'</span><span class="p">:</span> <span class="s">' 1'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/api/v3/purchases'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Amount'</span> <span class="o">=&gt;</span> <span class="s1">' 666.66'</span><span class="p">,</span>
  <span class="s1">'transactionRef'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;transactionRef&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span> <span class="o">=&gt;</span> <span class="s1">' 1'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span> <span class="s1">'/api/v3/purchases'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">GET /api/v3/purchases</code></p>

<p>This is an API which fetches the transactions status using the transaction reference and the amount debited from the user.</p>

<h3 id="get_api-v3-purchases-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Amount</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The amount debited from the user</td>
</tr>
<tr>
<td>transactionRef</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The transaction reference which was defined in the initial purchase request</td>
</tr>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#getting-a-bearer-token">here</a> to get started on setting up a Bearer Authorization token</td>
</tr>
<tr>
<td>Timestamp</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The current time in <a href="https://www.unixtimestamp.com/">unix timestamps</a> when the transaction happened</td>
</tr>
<tr>
<td>Nonce</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#nonce">here</a> for more info</td>
</tr>
<tr>
<td>Signature</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#signatures">here</a> for more info</td>
</tr>
<tr>
<td>SignatureMethod</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The hashing method the signature is encoded in.</td>
</tr>
<tr>
<td>AuthKeyVersion</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>By default, <strong><em>1.0</em></strong></td>
</tr>
</tbody></table>

<blockquote>
<p>Sample responses</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;AMOUNT&gt;&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;TRANSACTION REF&gt;&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactionDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-21T08:28:59"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Approved by Financial Institution"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre>

<h3 id="get_api-v3-purchases-responses">Response Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>response</td>
<td>number</td>
<td>The amount debited from the user</td>
</tr>
<tr>
<td>transactionRef</td>
<td>response</td>
<td>string</td>
<td>The transaction reference initially sent in the request</td>
</tr>
<tr>
<td>transactionDate</td>
<td>response</td>
<td>number</td>
<td>The date the transaction was performed</td>
</tr>
<tr>
<td>message</td>
<td>response</td>
<td>number</td>
<td>The status message of the transaction</td>
</tr>
</tbody></table>

<p><aside class="warning">
This operation requires the following details to be configured properly.
<ol> 
<li>The exact amount debited from the user</li>
<li> <a href="#opIdPOST_passport-oauth-token">Bearer Authorization</a> must have been obtained </li>
<li> The exact transaction reference for that session </li>
<li> Ensure you update the signature, more details <a href="#signatures">here</a>, same for the <a href="#nonce">nonce</a>  </li></p>

<p></ol>
</aside></p>
<h2 id='using-webpay'>Using [WebPay]</h2>
<p><a id="opIdGET_collections-api-v1-gettransaction-json"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/collections/api/v1/gettransaction.json?getacquirerdata=true&amp;transactionreference=%3C%3CtransactionRef%3E%3E&amp;amount=66666&amp;merchantcode=MX187"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">GET</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</pre>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span> <span class="p">};</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/collections/api/v1/gettransaction.json?getacquirerdata=true&amp;transactionreference=%3C%3CtransactionRef%3E%3E&amp;amount=66666&amp;merchantcode=MX187"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"GET"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>
</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">]</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/collections/api/v1/gettransaction.json?getacquirerdata=true&amp;transactionreference=%3C%3CtransactionRef%3E%3E&amp;amount=66666&amp;merchantcode=MX187"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"GET"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/collections/api/v1/gettransaction.json?getacquirerdata=true&amp;transactionreference=%3C%3CtransactionRef%3E%3E&amp;amount=66666&amp;merchantcode=MX187"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"GET"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: text/plain"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>

</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span><span class="x"> </span><span class="s">"/collections/api/v1/gettransaction.json"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/collections/api/v1/gettransaction.json"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/collections/api/v1/gettransaction.json'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/collections/api/v1/gettransaction.json'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span> <span class="s1">'/collections/api/v1/gettransaction.json'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">GET /collections/api/v1/gettransaction.json</code></p>

<p>*Get Transaction 2.0 *</p>

<p>Returns Bank Code and Account Number.</p>

<p>This requires you use the webpay API endpoint if this is your suited choice for transaction validation in <strong><em>production</em></strong>, table <a href="#endpoints">here</a>. Otherwise, use the IPG variant</p>

<h3 id="get_collections-api-v1-gettransaction-json-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>getacquirerdata</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Flag to include the acquirer&rsquo;s data</td>
</tr>
<tr>
<td>transactionreference</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>The transaction reference which was defined in the initial purchase request</td>
</tr>
<tr>
<td>amount</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>The amount debited from the user</td>
</tr>
<tr>
<td>merchantcode</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>The identifiable code given to you as a merchant on the IPG dashboard after registration</td>
</tr>
</tbody></table>

<blockquote>
<p>Sample Response</p>

<p>Error Response</p>
</blockquote>

<h3 id="get_collections-api-v1-gettransaction-json-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>default</td>
<td>Default</td>
<td>Default response</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="get_collections-api-v1-gettransaction-json-responseschema">Response Schema</h3>

<p><aside class="success">
This operation does not require authentication
</aside></p>

          <h1 id="enrollment"> Enrollments </h1>
<h2 id='enroll-card-for-otp'>Enroll Card For OTP</h2>
<p><a id="opIdPOST_api-v3-purchases-otps-enrollments"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"timestamp"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"nonce"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signature"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signaturemethod"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authkeyversion"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">parameters</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"paymentId"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"mobilePhoneNumber"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"transactionRef"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span> <span class="p">};</span>  

<span class="n">NSData</span> <span class="o">*</span><span class="n">postData</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSJSONSerialization</span> <span class="nf">dataWithJSONObject</span><span class="p">:</span><span class="n">parameters</span> <span class="nf">options</span><span class="p">:</span><span class="mi">0</span> <span class="nf">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/api/v3/purchases/otps/enrollments"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPBody</span><span class="p">:</span><span class="n">postData</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"nonce"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signature"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signaturemethod"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authkeyversion"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  
<span class="n">let</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"paymentId"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"mobilePhoneNumber"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"transactionRef"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span>  
<span class="p">]</span>  

<span class="n">let</span> <span class="n">postData</span> <span class="o">=</span> <span class="n">NSJSONSerialization</span><span class="p">.</span><span class="n">dataWithJSONObject</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">options</span><span class="o">:</span> <span class="n">nil</span><span class="p">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">nil</span><span class="p">)</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/api/v3/purchases/otps/enrollments"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPBody</span> <span class="o">=</span> <span class="n">postData</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>

</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/api/v3/purchases/otps/enrollments"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="s2">"{\\"</span><span class="nx">paymentId\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">mobilePhoneNumber\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">transactionRef\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">"}"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: text/plain"</span><span class="p">,</span>  
    <span class="s2">"authkeyversion: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"nonce: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signature: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signaturemethod: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"timestamp: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>
</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/api/v3/purchases/otps/enrollments"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authkeyversion"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signaturemethod"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signature"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"nonce"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"timestamp"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span> <span class="s">"{\\"</span><span class="n">paymentId</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">mobilePhoneNumber</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">transactionRef</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">"}"</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"text/plain"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Access_token&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Timestamp"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Timestamp&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Nonce"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Nonce&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Signature"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Signature&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"SignatureMethod"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;SignatureMethod&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"AuthKeyVersion"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 1"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/api/v3/purchases/otps/enrollments"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/api/v3/purchases/otps/enrollments"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span><span class="err">:</span><span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span><span class="err">:</span><span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span><span class="err">:</span><span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span><span class="err">:</span><span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span><span class="err">:</span><span class="s1">' 1'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/api/v3/purchases/otps/enrollments'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'text/plain'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Nonce'</span><span class="p">:</span> <span class="s">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Signature'</span><span class="p">:</span> <span class="s">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'SignatureMethod'</span><span class="p">:</span> <span class="s">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'AuthKeyVersion'</span><span class="p">:</span> <span class="s">' 1'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/api/v3/purchases/otps/enrollments'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span> <span class="o">=&gt;</span> <span class="s1">' 1'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/api/v3/purchases/otps/enrollments'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /api/v3/purchases/otps/enrollments</code></p>

<p>This API is used to make requests to enroll a card so that it can then use OTP as its 2FA.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="s2">"{{paymentId}}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mobilePhoneNumber"</span><span class="p">:</span><span class="s2">"{{PhoneNumber}}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="s2">"{{TransactionRef}}"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre>

<h3 id="post_api-v3-purchases-otps-enrollments-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#getting-a-bearer-token">here</a> to get started on setting up a Bearer Authorization token</td>
</tr>
<tr>
<td>Timestamp</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The current time in <a href="https://www.unixtimestamp.com/">unix timestamps</a> when the transaction happened</td>
</tr>
<tr>
<td>Nonce</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#nonce">here</a> for more info</td>
</tr>
<tr>
<td>Signature</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#signatures">here</a> for more info</td>
</tr>
<tr>
<td>SignatureMethod</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The hashing method the signature is encoded in.</td>
</tr>
<tr>
<td>AuthKeyVersion</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>By default, <strong><em>1.0</em></strong></td>
</tr>
</tbody></table>

<p><h3 id="get_api-v3-purchases-responses">Request Body</h3></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>paymentId</td>
<td>body</td>
<td>number</td>
<td>The payment identifier for the transaction</td>
</tr>
<tr>
<td>mobilePhoneNumber</td>
<td>body</td>
<td>number</td>
<td>The mobile number of the person</td>
</tr>
<tr>
<td>transactionRef</td>
<td>body</td>
<td>string</td>
<td>The transaction reference for this particular transaction</td>
</tr>
</tbody></table>

<blockquote>
<p>Sample responses</p>
</blockquote>
<pre class="highlight plaintext">
</pre>

<blockquote>
<p>Error Response</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An OTP related error has occured, please contact support."</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JB-1532673233-Enrol"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="err">//</span><span class="w"> </span><span class="err">Occurs</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">already</span><span class="w"> </span><span class="err">enrolled</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10403"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payments is not allowed for auto enrollment"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JB-1542891523-Enrol"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"266274"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="post_api-v3-purchases-otps-enrollments-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>default</td>
<td>Default</td>
<td>Default response</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="post_api-v3-purchases-otps-enrollments-responseschema">Response Schema</h3>

<p><aside class="warning">
This operation requires authentication using the Authorization header.
</aside></p>

          <h1 id="visa-docs"> Visa Transactions </h1>
<h2 id='visa-auth-page-load-page-for-ipin'>Visa Auth Page (load Page for iPin)</h2>
<p><a id="opIdPOST_V3DSStart"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight objective_c">
<span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"application/x-www-form-urlencoded"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/V3DSStart?osb=visa-3&amp;VAA=B"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/V3DSStart?osb=visa-3&amp;VAA=B"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/V3DSStart?osb=visa-3&amp;VAA=B"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/V3DSStart?osb=visa-3&amp;VAA=B"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: application/x-www-form-urlencoded"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>

</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/x-www-form-urlencoded"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/x-www-form-urlencoded"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/V3DSStart"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/V3DSStart"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/x-www-form-urlencoded'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/V3DSStart'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/x-www-form-urlencoded'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/V3DSStart'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/x-www-form-urlencoded'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/V3DSStart'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /V3DSStart</code></p>

<p><em>VISA Auth Page (Load Page for iPIN)</em></p>

<p>The endpoint for this is <strong><em>https://testcustomer34.cardinalcommerce.com/</em></strong></p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight yaml"><span class="s">TermUrl</span><span class="pi">:</span> <span class="s">&lt;&lt;TermUrl&gt;&gt;</span>
<span class="s">PaReq</span><span class="pi">:</span> <span class="s">&lt;&lt;PaReq&gt;&gt;</span>
<span class="s">MD</span><span class="pi">:</span> <span class="s">&lt;&lt;MD&gt;&gt;</span>

</pre>

<h3 id="post_v3dsstart-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/x-www-form-urlencoded</td>
</tr>
</tbody></table>

<h3 id="post_v3dsstart-query">Query Parameters</h3>

<blockquote>
<p>Docs on what queries are</p>
</blockquote>
<pre class="highlight plaintext">Query parameters are attached to the url in the form of a typical GET query parameter.

For Sample, using the Sample on the left, we have:

endpoint?osb=&lt;&lt;OSB&gt;&gt;&amp;VAA=&lt;&lt;VAA&gt;&gt;

</pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>osb</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>VAA</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<h3 id="get_api-v3-purchases-responses">Request Body</h3>
 

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>TermUrl</td>
<td>body</td>
<td>string</td>
<td>true</td>
</tr>
<tr>
<td>PaReq</td>
<td>body</td>
<td>string</td>
<td>true</td>
</tr>
<tr>
<td>MD</td>
<td>body</td>
<td>string</td>
<td>true</td>
</tr>
</tbody></table>

<blockquote>
<p>Sample responses</p>

<p>default Response</p>
</blockquote>

<h3 id="post_v3dsstart-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>default</td>
<td>Default</td>
<td>Default response</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="post_v3dsstart-responseschema">Response Schema</h3>

<p><aside class="success">
This operation does not require authentication
</aside></p>
<h2 id='collections-cardinal-callback'>Collections Cardinal Callback</h2>
<p><a id="opIdPOST_collections-api-v1-pay-cardinalCallBack"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/collections/api/v1/pay/cardinalCallBack"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: application/x-www-form-urlencoded"</span><span class="p">,</span>  
    <span class="s2">"accept-encoding: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"accept-language: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-length: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"user-agent: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>
</pre>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"application/x-www-form-urlencoded"</span><span class="p">,</span>  
                           <span class="s">@"accept-encoding"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"accept-language"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"content-length"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"user-agent"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/collections/api/v1/pay/cardinalCallBack"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">,</span>  
  <span class="s">"accept-encoding"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"accept-language"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"content-length"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"user-agent"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/collections/api/v1/pay/cardinalCallBack"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>

</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/collections/api/v1/pay/cardinalCallBack"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"user-agent"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-length"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept-language"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept-encoding"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"application/x-www-form-urlencoded"</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/x-www-form-urlencoded"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept-Encoding"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" gzip, deflate, br"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept-Language"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" fr-FR,fr;q=0.9,en-GB;q=0.8,en;q=0.7,fr-CA;q=0.6,en-US;q=0.5"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Length"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 4170"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/x-www-form-urlencoded"</span><span class="p">},</span><span class="x">
        </span><span class="s">"User-Agent"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.146 Safari/537.36"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/collections/api/v1/pay/cardinalCallBack"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/collections/api/v1/pay/cardinalCallBack"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">' text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'</span><span class="p">,</span>
  <span class="s1">'Accept-Encoding'</span><span class="err">:</span><span class="s1">' gzip, deflate, br'</span><span class="p">,</span>
  <span class="s1">'Accept-Language'</span><span class="err">:</span><span class="s1">' fr-FR,fr;q=0.9,en-GB;q=0.8,en;q=0.7,fr-CA;q=0.6,en-US;q=0.5'</span><span class="p">,</span>
  <span class="s1">'Content-Length'</span><span class="err">:</span><span class="s1">' 4170'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'User-Agent'</span><span class="err">:</span><span class="s1">' Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.146 Safari/537.36'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/collections/api/v1/pay/cardinalCallBack'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">' text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'</span><span class="p">,</span>
  <span class="s">'Accept-Encoding'</span><span class="p">:</span> <span class="s">' gzip, deflate, br'</span><span class="p">,</span>
  <span class="s">'Accept-Language'</span><span class="p">:</span> <span class="s">' fr-FR,fr;q=0.9,en-GB;q=0.8,en;q=0.7,fr-CA;q=0.6,en-US;q=0.5'</span><span class="p">,</span>
  <span class="s">'Content-Length'</span><span class="p">:</span> <span class="s">' 4170'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s">'User-Agent'</span><span class="p">:</span> <span class="s">' Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.146 Safari/537.36'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/collections/api/v1/pay/cardinalCallBack'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">' text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'</span><span class="p">,</span>
  <span class="s1">'Accept-Encoding'</span> <span class="o">=&gt;</span> <span class="s1">' gzip, deflate, br'</span><span class="p">,</span>
  <span class="s1">'Accept-Language'</span> <span class="o">=&gt;</span> <span class="s1">' fr-FR,fr;q=0.9,en-GB;q=0.8,en;q=0.7,fr-CA;q=0.6,en-US;q=0.5'</span><span class="p">,</span>
  <span class="s1">'Content-Length'</span> <span class="o">=&gt;</span> <span class="s1">' 4170'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="s1">'User-Agent'</span> <span class="o">=&gt;</span> <span class="s1">' Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.146 Safari/537.36'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/collections/api/v1/pay/cardinalCallBack'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /collections/api/v1/pay/cardinalCallBack</code></p>

<p><em>VISA -&gt; ISW CallBack</em></p>

<p>null</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight yaml"><span class="s">MD</span><span class="pi">:</span> <span class="s1">'</span><span class="s">240412'</span>
<span class="s">PaRes</span><span class="pi">:</span> <span class="pi">&gt;-</span>
  <span class="no">eNqdWFmXqkgSfudX1Ln9aHezu/Sx6pxMdhQUZBHe2GSRRQQB/fWDWnWr+k6dmZ7xxcwg8suIjIgvEpZGco4idhcFl3P0tlSipvHi6CUNX3+YxGI33+Nz5lJV0bRXYqrHfrwtt0CPmoeCQKXTbWGEV4trOPD6SoxPu+jcpFX5hv+J/Uks0Y/pCHwOEq9s35ZeUENJfaMoiiTJJfo+XRbRWWLfcIKk6OkSfc6W6Oey7eU+akYbhzR8swyJNm+JoxgJG9qLzjVc0rADLLyB1yV611iGXhu9ERg+x2iMesHov/DZXxS1RB/y5ekOB4rqMmJP778l+lW0HI/jHJXB9Y2+P/o5W0bDqSqjUWN07ud4iX5ad/LKN+zvv1H1Ll0a+7dlmxa/WLX4ixgVHvJl03rtpXlzluj7aBl4XfcGAICQh2KigfuPjcyI5xSmUpPJ6O1DZRkF6RtGj0aN/49VII+rc9omxd3UvwuW6N0U9BHJt+Uujctxs3P0MhR52bz+SNr29BeK9n3/Z0/+WZ1jlBi9QLEFOiqETRr/9uO5Kgql8lD9T8sYr6zKNPDy9Oa1Y2YoUZtU4ctP276DMfQ7Eo7qHPPHCPVHgFPlH3cJRuL0iIl+D/rFs3+yy6/Gnhvvjybx8PsGvwC9LfXoEN0zInoxden1x2/flQKbxlHT/j9bf2z7FeEDz/LyS/TGMyrUVA6V3TKQSGG/sfdrduace2H++rHuqblEf9r67sgzal9O56kobMlmWGE3/0AxjnFMb+UaTvOrbODMArTzCzPTxJAgtvNDM2cFm6wOGOHMavSWUfQmSmWBJLadszgjm7Wry+micA9Ycz46Ub3YiVqLVbvuSuMneSbNaPm2ik4nQj5tBCusSTyw0gvPxxTe6rAlE0VqxEuGhKpl0LNOnmiZG/dyfPTMQy3HHbYRTkHDsmF1pcoBzMoOC+g+npnp4nCZ8t4m9aarRIdHxjtKa3eLsD61JeCE3aN9KDYX6cofh37Qb0R7Yi1cWiycWUu7zFFXbKowPN1JNP3KOuRZn60ujihX8gRtIIsjh77gSMObXQsHG+AtV3wQruEqkOb06dpzpMTz6IIzCrvofJ5sIn4Dt672+volg96jsoquzyjsaWzBeq33HO0ufhYFreqNbMCor4x3DtPSy1/YqKheHsE7//6yMT8fAGY3Cj7nTFWM3BlEv7+sX5WRm6pRf2e8bpK0+v2FeTV3S/TXfR4bM9G5TQ9jDY3kqEgSa98YBjS7GPQSBLHEgJ3Us5ojrypXSrpABRrHQw30bsatFXAUAG5yMFEYy1IG1gBrGKsWMq5UILeoPHs+iBkI7kIIKoU31SQo9JNf8I1GLFrftq4OYcbj+Bqw3E6B4AHI9L2sHPMj4to05tnuSdG1nosd1tI0lgWt6e5VTBJV3Ekhqxkg4ntsUFjuqmTBoGaAVlnZG2XXp0wbkA+hIs4H5gbkp0WOAXLLUDSsZ/oHuMT1+tYT8k7R5ne37zKR6131bohPSgMiZMB5d8fgvrgjcWrn23geFGqu6GbPPQHXXD+wzl4+ejad+AyEGq4MogF85AmiGDz3FUTPfXsem0Re+oV1HQMCpQyoMD7WyTEVFj0G7wEAYMMAbQ7uzxEmXo0TDtQcGeKpXNRJDkNCwmW45c1pQAVOBtaXxtYXHKfqk6HwF3m8d46tmolCHFUk9IZ2J/jIlKJEfLZIvLhzCiXNIigFfYtOd2jEri/6Qlko7IQl+yAINuZILiFIjtKp47SpbZywuUabWCmVszOSNNJMqzdWKGHhXga33KeSlrsCdmVeFV4Khfw6y3u+sdBso2Ga0kCYkrteNtmdnWeXvTYx5S3hrREi9tV96MMOHnFCjOs9K9GSE21OZt3hl87e66dQkSfHoVSwq1VTUjMjCQh2UJ6XCetsOr0U97daRLCI2yV9EiTKlHXWk7qrKYFJRaufWwZzWV/qdaONNLyqNrdjgw8bsSm08OglNHFBlV5igQZgRTY9EhnP3BF1hQMZAArTC4zNCDsgCBNOGrNRO/AJvg0E62LiqiJxYX6PpLPXc5eBrLuXHwmNOASPuQYIH2AaxfGxZuqxoJupb2ldMjD4GXSx1q7RGD96Ui/e80nHMgjjnq+AeZBSJQ1xDMHt3TxVYYRVSmIfsenqxn1XsGzscEA15D2Hzfedc0ZD+iBhpbzZLBYXa+tbSLciWpZXj0Gkn3eO2XI4U1ARtaluA9HaFNuoZE03GGoPtH3apl3H+wfOMHujEJK48o+X80HuJrMpgookeYpxy1X7m8/RRaPjJ+bgMgymy543OV62zMV1x8bJnhf1Qjmvt3h2OcaT24BSIabNz/HRdBnu9clYXwnqO8ZiMHZkrKz4wljfHkAfsf+QsdjbveLu1RkoY+Llfql3QcZFCuyf7BT3lkbwV1fIL449sD6Bt2NcM3cHWcQn5V7RpZ4Dz/pnwfG6s/U7yMktjgNvAOO99BWW1/OA1GKzWHQh83cmQxTjTmXcTTXUTyoztJ8yRXD+I5Ox4MlkiKJTvfi0ZsVC65ONvjDWnb2CEgxcBrQnYKMwhiy7YxqP5Vp4I9chCpQe/oO+X1uCdRtNvoW2FGsY18fu/NdDh8+sw0aWEmRQCaPH1x6n9QGRvA2ghADanijgN3Pqe9VB0rflpuWFPDnV3bRfe0JvHg4T+uicZgpXXCVTuYic6oFOP6byrr0yiw2yLzbTeBau2fmqFPApsyjPQzavIFWQIw+ZVDE5OPZGKIuk2FbTWwK7Gjbd4bYgEy5e7dUpF67UixUjl/rW2lOw3vSmOvVhvdJ25D0jABCy6Abp97wJuV5jFAD6NXBkR3Il4PiUFnMqhHNbNBf9vWEZJtbHOmFdxpxIQsE6joebB4/w59mdBxSIPcDYWLMh1OepdJXJvWG566uE8bNdfOU9xDCqs2KAw4MfdgonsMCOoc7F2RbFbT/OHZcQhKFkbK8uU7kfc+eXNmHe2wREYg3OLysTXZBz1FrRDG/KqYaam71HnMUrPgDSL3Ec3zDTHE6bUGtnapZoQbIy0rWhNTF9QOtdruLI2nUuHQWklbFZuZxwTuUaGFP5WE9W+6Rld1Sc1Se+nG8yt5b12cE7c/ok9GkalXfd6SLGmT8YhxlAij4dS/7GmjJlWZfUWc2Nms+vhHW2RD5+/ad132Vj3afRR93LQGaH7YTLLT1ZKQATmF0t7CSfZB+paAJFjP+tYJDvKuZr72fBZ+//TzcZ5L9dZT5vMj/vBuNNZnjeZHi580ceuBcSIiaBOgZ+UDKOVAynVw1wte+y7CHDfsoySCla0zNPSwWuly3zxqkKaB4bIwzoOYNITv6N297P48F7fS8Y9r2mF9d/ygvIfyEGS4HKBy8o77yw84kFNi6GY+0fPoKBfERjzE0wEoAKWAam2grGGkNF54Pf6RrH7M/OYtpuZ9rGrhkDEFmJ0hm5QGO0xnwlDTRGR87E5JDOjrfVFV612j2KN0em5yQK9t1K9nqs5Q00I7ksjI/RYJ1yZxfV3JbemKxCxd7uMKtFJba2EFl5VUl050wc7IixBj6lBgpWYS6XhxxFWyFbYbXK3trZEaXUaMfbV79Otff7AA56I3t2cORnC5ekG7qwCkq2hTBJGrfPi/pEpQHH/VsL/04X+VBmwUPZgMDsx0BC9PZ9fccaSPk5FHLI90qkyhGXOn3paYjbmuI59TKz9ac0Pp236uEkcBx5vok+pCul4IL90Ph+K+nw0iXbedHGkZuL+WWt3bBanwRERed9hAz9LMsPQKzrMby7jFmtxUszR9WqnAWTWVrvbq0mKtCK/Bkx7b1tJ0j+nlsHql0t/G2s17ZJnNxkiqyurrgA39Y3+vk2hP58Q/p8d3p8EHp8oLp/wvj64epf0+MhDA==</span>

</pre>

<h3 id="post_collections-api-v1-pay-cardinalcallback-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Accept</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>Content-Length</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>User-Agent</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<h3 id="get_api-v3-purchases-responses">Request Body</h3>
  

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>MD</td>
<td>body</td>
<td>string</td>
<td>true</td>
</tr>
<tr>
<td>PaRes</td>
<td>body</td>
<td>string</td>
<td>true</td>
</tr>
</tbody></table>

<blockquote>
<p>Sample responses</p>

<p>default Response</p>
</blockquote>

<h3 id="post_collections-api-v1-pay-cardinalcallback-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>default</td>
<td>Default</td>
<td>Default response</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="post_collections-api-v1-pay-cardinalcallback-responseschema">Response Schema</h3>

<p><aside class="success">
This operation does not require authentication
</aside></p>

          <h1 id="validation"> Transaction Validation </h1>
<h2 id='basic-purchase-validation-v3'>Basic Purchase Validation [V3]</h2>
<p><a id="opIdPOST_api-v3-purchases-validations"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/api/v3/purchases/validations"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authkeyversion"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signaturemethod"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signature"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"nonce"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"timestamp"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span> <span class="s">"{\\"</span><span class="n">transactionRef</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">authData</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">"}"</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/api/v3/purchases/validations"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="s2">"{\\"</span><span class="nx">transactionRef\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">authData\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">"}"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: text/plain"</span><span class="p">,</span>  
    <span class="s2">"authkeyversion: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"nonce: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signature: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signaturemethod: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"timestamp: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"nonce"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signature"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signaturemethod"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authkeyversion"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  
<span class="n">let</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"transactionRef"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"authData"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span>  
<span class="p">]</span>  

<span class="n">let</span> <span class="n">postData</span> <span class="o">=</span> <span class="n">NSJSONSerialization</span><span class="p">.</span><span class="n">dataWithJSONObject</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">options</span><span class="o">:</span> <span class="n">nil</span><span class="p">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">nil</span><span class="p">)</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/api/v3/purchases/validations"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPBody</span> <span class="o">=</span> <span class="n">postData</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>


</pre>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"timestamp"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"nonce"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signature"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signaturemethod"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authkeyversion"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">parameters</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"transactionRef"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"authData"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span> <span class="p">};</span>  

<span class="n">NSData</span> <span class="o">*</span><span class="n">postData</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSJSONSerialization</span> <span class="nf">dataWithJSONObject</span><span class="p">:</span><span class="n">parameters</span> <span class="nf">options</span><span class="p">:</span><span class="mi">0</span> <span class="nf">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/api/v3/purchases/validations"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPBody</span><span class="p">:</span><span class="n">postData</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"text/plain"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Access_token&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Timestamp"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Timestamp&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Nonce"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Nonce&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Signature"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Signature&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"SignatureMethod"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;SignatureMethod&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"AuthKeyVersion"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 1"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/api/v3/purchases/validations"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/api/v3/purchases/validations"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span><span class="err">:</span><span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span><span class="err">:</span><span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span><span class="err">:</span><span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span><span class="err">:</span><span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span><span class="err">:</span><span class="s1">' 1'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/api/v3/purchases/validations'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'text/plain'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Nonce'</span><span class="p">:</span> <span class="s">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Signature'</span><span class="p">:</span> <span class="s">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'SignatureMethod'</span><span class="p">:</span> <span class="s">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'AuthKeyVersion'</span><span class="p">:</span> <span class="s">' 1'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/api/v3/purchases/validations'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span> <span class="o">=&gt;</span> <span class="s1">' 1'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/api/v3/purchases/validations'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /api/v3/purchases/validations</code></p>

<p><em>This API is used to validate the status of a transaction</em></p>

<blockquote>
<p>Body parameter</p>
</blockquote>

<h3 id="post_api-v3-purchases-validations-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#getting-a-bearer-token">here</a> to get started on setting up a Bearer Authorization token</td>
</tr>
<tr>
<td>Timestamp</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The current time in <a href="https://www.unixtimestamp.com/">unix timestamps</a> when the transaction happened</td>
</tr>
<tr>
<td>Nonce</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#nonce">here</a> for more info</td>
</tr>
<tr>
<td>Signature</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#signatures">here</a> for more info</td>
</tr>
<tr>
<td>SignatureMethod</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The hashing method the signature is encoded in.</td>
</tr>
<tr>
<td>AuthKeyVersion</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>By default, <strong><em>1.0</em></strong></td>
</tr>
</tbody></table>

<p><h3 id="get_api-v3-purchases-responses">Request Body</h3></p>

<blockquote>
<p>Sample Response </p>
</blockquote>
<pre class="highlight plaintext">
</pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transactionRef</td>
<td>response</td>
<td>string</td>
<td>The transaction reference initially sent in the request</td>
</tr>
<tr>
<td>authData</td>
<td>body</td>
<td>string</td>
<td>Reference <a href="#authdata">here</a> for details on generating the authData hash</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>

<h3 id="post_api-v3-purchases-validations-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>default</td>
<td>Default</td>
<td>Default response</td>
<td>Inline</td>
</tr>
</tbody></table>

<p><aside class="warning">
This operation requires authentication using the <strong><em>Basic Authorization</em></strong> header
</aside></p>
<h2 id='recurrent-purchase-validation-v2'>Recurrent Purchase Validation [V2]</h2>
<p><a id="opIdPOST_api-v2-purchases-validations-recurrents"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"timestamp"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"nonce"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signature"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signaturemethod"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authkeyversion"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">parameters</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"transactionRef"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"authData"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span> <span class="p">};</span>  

<span class="n">NSData</span> <span class="o">*</span><span class="n">postData</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSJSONSerialization</span> <span class="nf">dataWithJSONObject</span><span class="p">:</span><span class="n">parameters</span> <span class="nf">options</span><span class="p">:</span><span class="mi">0</span> <span class="nf">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/api/v2/purchases/validations/recurrents"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPBody</span><span class="p">:</span><span class="n">postData</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"nonce"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signature"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signaturemethod"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authkeyversion"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  
<span class="n">let</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"transactionRef"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"authData"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span>  
<span class="p">]</span>  

<span class="n">let</span> <span class="n">postData</span> <span class="o">=</span> <span class="n">NSJSONSerialization</span><span class="p">.</span><span class="n">dataWithJSONObject</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">options</span><span class="o">:</span> <span class="n">nil</span><span class="p">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">nil</span><span class="p">)</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/api/v2/purchases/validations/recurrents"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPBody</span> <span class="o">=</span> <span class="n">postData</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>

</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/api/v2/purchases/validations/recurrents"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="s2">"{\\"</span><span class="nx">transactionRef\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">authData\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">"}"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: text/plain"</span><span class="p">,</span>  
    <span class="s2">"authkeyversion: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"nonce: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signature: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signaturemethod: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"timestamp: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>

</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/api/v2/purchases/validations/recurrents"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authkeyversion"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signaturemethod"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signature"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"nonce"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"timestamp"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span> <span class="s">"{\\"</span><span class="n">transactionRef</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">authData</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">"}"</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"text/plain"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Access_token&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Timestamp"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Timestamp&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Nonce"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Nonce&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Signature"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Signature&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"SignatureMethod"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;SignatureMethod&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"AuthKeyVersion"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 1"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/api/v2/purchases/validations/recurrents"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/api/v2/purchases/validations/recurrents"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span><span class="err">:</span><span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span><span class="err">:</span><span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span><span class="err">:</span><span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span><span class="err">:</span><span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span><span class="err">:</span><span class="s1">' 1'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/api/v2/purchases/validations/recurrents'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'text/plain'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Nonce'</span><span class="p">:</span> <span class="s">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Signature'</span><span class="p">:</span> <span class="s">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'SignatureMethod'</span><span class="p">:</span> <span class="s">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'AuthKeyVersion'</span><span class="p">:</span> <span class="s">' 1'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/api/v2/purchases/validations/recurrents'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span> <span class="o">=&gt;</span> <span class="s1">' 1'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/api/v2/purchases/validations/recurrents'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /api/v2/purchases/validations/recurrents</code></p>

<p><em>This validates a recurrent transaction and provides access to a token which may be used to reinitiate a recurrent billing transaction</em></p>

<blockquote>
<p>Body parameter</p>
</blockquote>

<h3 id="post_api-v2-purchases-validations-recurrents-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#getting-a-bearer-token">here</a> to get started on setting up a Bearer Authorization token</td>
</tr>
<tr>
<td>Timestamp</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The current time in <a href="https://www.unixtimestamp.com/">unix timestamps</a> when the transaction happened</td>
</tr>
<tr>
<td>Nonce</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#nonce">here</a> for more info</td>
</tr>
<tr>
<td>Signature</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#signatures">here</a> for more info</td>
</tr>
<tr>
<td>SignatureMethod</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The hashing method the signature is encoded in.</td>
</tr>
<tr>
<td>AuthKeyVersion</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>By default, <strong><em>1.0</em></strong></td>
</tr>
</tbody></table>

<p><h3 id="get_api-v3-purchases-responses">Request Body</h3></p>

<blockquote>
<p>Sample Response </p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"cardType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MasterCard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;TOKEN&gt;&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tokenExpiryDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2004"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"panLast4Digits"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;LAST 4 PAN DIGITS&gt;&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactionRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;TRANSACTION REFERENCE&gt;&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transactionRef</td>
<td>response</td>
<td>string</td>
<td>The transaction reference initially sent in the request</td>
</tr>
<tr>
<td>authData</td>
<td>body</td>
<td>string</td>
<td>Reference <a href="#authdata">here</a> for details on generating the authData hash</td>
</tr>
</tbody></table>

<h3 id="post_api-v3-purchases-responses">Response Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cardType</td>
<td>response</td>
<td>string</td>
<td>The name of the card provider used in the transaction</td>
</tr>
<tr>
<td>balance</td>
<td>response</td>
<td>string</td>
<td>The amount debited from the user account</td>
</tr>
<tr>
<td>token</td>
<td>response</td>
<td>number</td>
<td>The tokenized version of the transaction which can be used in a recurrent billing purchase</td>
</tr>
<tr>
<td>tokenExpiryDate</td>
<td>response</td>
<td>number</td>
<td>A 4 digit number representing when the token would be invalid</td>
</tr>
<tr>
<td>panLast4Digits</td>
<td>response</td>
<td>number</td>
<td>The last 4 digits of the card number</td>
</tr>
<tr>
<td>transactionRef</td>
<td>response</td>
<td>string</td>
<td>The transaction reference initially sent in the request</td>
</tr>
</tbody></table>

<h3 id="post_api-v2-purchases-validations-recurrents-responseschema">Response Schema</h3>

<p><aside class="warning">
This operation requires the following details to be configured properly.
<ol> 
<li><a href="#authdata">Auth Data</a></li>
<li> <a href="#opIdPOST_passport-oauth-token">Bearer Authorization</a> must have been obtained </li>
<li> Ensure you update the signature, more details <a href="#signatures">here</a>, same for the <a href="#nonce">nonce</a>  </li>
</ol>
</aside></p>
<h2 id='purchase-validation-using-otp-auth-v3'>Purchase Validation using OTP Auth [V3]</h2>
<p><a id="opIdPOST_api-v3-purchases-validations-otps-auths"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/api/v3/purchases/validations/otps/auths"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="s2">"{\\"</span><span class="nx">transactionRef\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">otp\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">"}"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: text/plain"</span><span class="p">,</span>  
    <span class="s2">"authkeyversion: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"nonce: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signature: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signaturemethod: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"timestamp: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>
</pre>
<pre class="highlight objective_c">
<span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"timestamp"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"nonce"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signature"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signaturemethod"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authkeyversion"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">parameters</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"transactionRef"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"otp"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span> <span class="p">};</span>  

<span class="n">NSData</span> <span class="o">*</span><span class="n">postData</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSJSONSerialization</span> <span class="nf">dataWithJSONObject</span><span class="p">:</span><span class="n">parameters</span> <span class="nf">options</span><span class="p">:</span><span class="mi">0</span> <span class="nf">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/api/v3/purchases/validations/otps/auths"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPBody</span><span class="p">:</span><span class="n">postData</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>
</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"nonce"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signature"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signaturemethod"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authkeyversion"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  
<span class="n">let</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"transactionRef"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"otp"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span>  
<span class="p">]</span>  

<span class="n">let</span> <span class="n">postData</span> <span class="o">=</span> <span class="n">NSJSONSerialization</span><span class="p">.</span><span class="n">dataWithJSONObject</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">options</span><span class="o">:</span> <span class="n">nil</span><span class="p">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">nil</span><span class="p">)</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/api/v3/purchases/validations/otps/auths"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPBody</span> <span class="o">=</span> <span class="n">postData</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
</pre>
<pre class="highlight csharp">
<span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/api/v3/purchases/validations/otps/auths"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authkeyversion"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signaturemethod"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signature"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"nonce"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"timestamp"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span> <span class="s">"{\\"</span><span class="n">transactionRef</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">otp</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">"}"</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"text/plain"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Access_token&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Timestamp"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Timestamp&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Nonce"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Nonce&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Signature"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Signature&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"SignatureMethod"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;SignatureMethod&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"AuthKeyVersion"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 1"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/api/v3/purchases/validations/otps/auths"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/api/v3/purchases/validations/otps/auths"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span><span class="err">:</span><span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span><span class="err">:</span><span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span><span class="err">:</span><span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span><span class="err">:</span><span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span><span class="err">:</span><span class="s1">' 1'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/api/v3/purchases/validations/otps/auths'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'text/plain'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Nonce'</span><span class="p">:</span> <span class="s">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Signature'</span><span class="p">:</span> <span class="s">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'SignatureMethod'</span><span class="p">:</span> <span class="s">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'AuthKeyVersion'</span><span class="p">:</span> <span class="s">' 1'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/api/v3/purchases/validations/otps/auths'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span> <span class="o">=&gt;</span> <span class="s1">' 1'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/api/v3/purchases/validations/otps/auths'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /api/v3/purchases/validations/otps/auths</code></p>

<p><em>Validation Request - OTP</em></p>

<blockquote>
<p>Body parameter</p>
</blockquote>

<h3 id="post_api-v3-purchases-validations-otps-auths-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#getting-a-bearer-token">here</a> to get started on setting up a Bearer Authorization token</td>
</tr>
<tr>
<td>Timestamp</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The current time in <a href="https://www.unixtimestamp.com/">unix timestamps</a> when the transaction happened</td>
</tr>
<tr>
<td>Nonce</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#nonce">here</a> for more info</td>
</tr>
<tr>
<td>Signature</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#signatures">here</a> for more info</td>
</tr>
<tr>
<td>SignatureMethod</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The hashing method the signature is encoded in.</td>
</tr>
<tr>
<td>AuthKeyVersion</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>By default, <strong><em>1.0</em></strong></td>
</tr>
</tbody></table>

<h3 id="get_api-v3-purchases-responses">Request Body</h3>
 

<blockquote>
<p>Sample Response </p>
</blockquote>
<pre class="highlight plaintext">
</pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transactionRef</td>
<td>response</td>
<td>string</td>
<td>The transaction reference initially sent in the request</td>
</tr>
<tr>
<td>otp</td>
<td>body</td>
<td>string</td>
<td>The OTP code which was sent to the user</td>
</tr>
</tbody></table>

<blockquote>
<p>Error Response</p>
</blockquote>
<pre class="highlight plaintext">
</pre>

<h3 id="post_api-v3-purchases-validations-otps-auths-responses">Response Body</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>default</td>
<td>Default</td>
<td>Default response</td>
<td>Inline</td>
</tr>
</tbody></table>

<p><aside class="warning">
This operation requires the following details to be configured properly.
<ol> 
<li><a href="#authdata">Auth Data</a></li>
<li> <a href="#opIdPOST_passport-oauth-token">Bearer Authorization</a> must have been obtained </li>
<li> Ensure you update the signature, more details <a href="#signatures">here</a>, same for the <a href="#nonce">nonce</a>  </li></p>

<p></ol>
</aside></p>
<h2 id='purchase-otp-authentication'>Purchase OTP Authentication</h2>
<p><a id="opIdPOST_api-v3-purchases-otps-auths"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight objective_c"><span class="cp">#import &lt;Foundation/Foundation.h&gt;  
</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">headers</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"accept"</span><span class="o">:</span> <span class="s">@"text/plain"</span><span class="p">,</span>  
                           <span class="s">@"content-type"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authorization"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"timestamp"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"nonce"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signature"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"signaturemethod"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span><span class="p">,</span>  
                           <span class="s">@"authkeyversion"</span><span class="o">:</span> <span class="s">@"SOME_STRING_VALUE"</span> <span class="p">};</span>  
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">parameters</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="s">@"paymentId"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"authData"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
                              <span class="s">@"otp"</span><span class="o">:</span> <span class="s">@"&lt;ADD STRING VALUE&gt;"</span> <span class="p">};</span>  

<span class="n">NSData</span> <span class="o">*</span><span class="n">postData</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSJSONSerialization</span> <span class="nf">dataWithJSONObject</span><span class="p">:</span><span class="n">parameters</span> <span class="nf">options</span><span class="p">:</span><span class="mi">0</span> <span class="nf">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>  

<span class="n">NSMutableURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableURLRequest</span> <span class="nf">requestWithURL</span><span class="p">:[</span><span class="n">NSURL</span> <span class="nf">URLWithString</span><span class="p">:</span><span class="s">@"/api/v3/purchases/otps/auths"</span><span class="p">]</span>  
                                                       <span class="nf">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>  
                                                   <span class="nf">timeoutInterval</span><span class="p">:</span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPMethod</span><span class="p">:</span><span class="s">@"POST"</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setAllHTTPHeaderFields</span><span class="p">:</span><span class="n">headers</span><span class="p">];</span>  
<span class="p">[</span><span class="n">request</span> <span class="nf">setHTTPBody</span><span class="p">:</span><span class="n">postData</span><span class="p">];</span>  

<span class="n">NSURLSession</span> <span class="o">*</span><span class="n">session</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLSession</span> <span class="nf">sharedSession</span><span class="p">];</span>  
<span class="n">NSURLSessionDataTask</span> <span class="o">*</span><span class="n">dataTask</span> <span class="o">=</span> <span class="p">[</span><span class="n">session</span> <span class="nf">dataTaskWithRequest</span><span class="p">:</span><span class="n">request</span>  
                                            <span class="nf">completionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSData</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">NSURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
                                                    <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">httpResponse</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="p">)</span> <span class="n">response</span><span class="err">;</span>  
                                                    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">httpResponse</span><span class="p">)</span><span class="err">;</span>  
                                                <span class="p">}</span>  
                                            <span class="p">}];</span>  
<span class="p">[</span><span class="n">dataTask</span> <span class="nf">resume</span><span class="p">];</span>

</pre>
<pre class="highlight c"><span class="n">import</span> <span class="n">Foundation</span>  

<span class="n">let</span> <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"accept"</span><span class="o">:</span> <span class="s">"text/plain"</span><span class="p">,</span>  
  <span class="s">"content-type"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authorization"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"timestamp"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"nonce"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signature"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"signaturemethod"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span>  
  <span class="s">"authkeyversion"</span><span class="o">:</span> <span class="s">"SOME_STRING_VALUE"</span>  
<span class="p">]</span>  
<span class="n">let</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>  
  <span class="s">"paymentId"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"authData"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span><span class="p">,</span>  
  <span class="s">"otp"</span><span class="o">:</span> <span class="s">"&lt;ADD STRING VALUE&gt;"</span>  
<span class="p">]</span>  

<span class="n">let</span> <span class="n">postData</span> <span class="o">=</span> <span class="n">NSJSONSerialization</span><span class="p">.</span><span class="n">dataWithJSONObject</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">options</span><span class="o">:</span> <span class="n">nil</span><span class="p">,</span> <span class="n">error</span><span class="o">:</span> <span class="n">nil</span><span class="p">)</span>  

<span class="n">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">NSMutableURLRequest</span><span class="p">(</span><span class="n">URL</span><span class="o">:</span> <span class="n">NSURL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span> <span class="s">"/api/v3/purchases/otps/auths"</span><span class="p">)</span><span class="o">!</span><span class="p">,</span>  
                                        <span class="n">cachePolicy</span><span class="o">:</span> <span class="p">.</span><span class="n">UseProtocolCachePolicy</span><span class="p">,</span>  
                                    <span class="n">timeoutInterval</span><span class="o">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>  
<span class="n">request</span><span class="p">.</span><span class="n">allHTTPHeaderFields</span> <span class="o">=</span> <span class="n">headers</span>  
<span class="n">request</span><span class="p">.</span><span class="n">HTTPBody</span> <span class="o">=</span> <span class="n">postData</span>  

<span class="n">let</span> <span class="n">session</span> <span class="o">=</span> <span class="n">NSURLSession</span><span class="p">.</span><span class="n">sharedSession</span><span class="p">()</span>  
<span class="n">let</span> <span class="n">dataTask</span> <span class="o">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTaskWithRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">completionHandler</span><span class="o">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="n">in</span>  
  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">)</span> <span class="p">{</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>  
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
    <span class="n">let</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">response</span> <span class="n">as</span><span class="o">?</span> <span class="n">NSHTTPURLResponse</span>  
    <span class="n">println</span><span class="p">(</span><span class="n">httpResponse</span><span class="p">)</span>  
  <span class="p">}</span>  
<span class="p">})</span>  

<span class="n">dataTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>

</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>  

<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>  
  <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s2">"/api/v3/purchases/otps/auths"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>  
  <span class="nx">CURLOPT_ENCODING</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>  
  <span class="nx">CURLOPT_MAXREDIRS</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>  
  <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTP_VERSION</span> <span class="o">=&gt;</span> <span class="nx">CURL_HTTP_VERSION_1_1</span><span class="p">,</span>  
  <span class="nx">CURLOPT_CUSTOMREQUEST</span> <span class="o">=&gt;</span> <span class="s2">"POST"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="s2">"{\\"</span><span class="nx">paymentId\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">authData\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">",</span><span class="se">\\</span><span class="s2">"</span><span class="nx">otp\\</span><span class="s2">":</span><span class="se">\\</span><span class="s2">"</span><span class="o">&lt;</span><span class="nx">ADD</span> <span class="nx">STRING</span> <span class="nx">VALUE</span><span class="o">&gt;</span><span class="nx">\\</span><span class="s2">"}"</span><span class="p">,</span>  
  <span class="nx">CURLOPT_HTTPHEADER</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>  
    <span class="s2">"accept: text/plain"</span><span class="p">,</span>  
    <span class="s2">"authkeyversion: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"authorization: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"content-type: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"nonce: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signature: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"signaturemethod: SOME_STRING_VALUE"</span><span class="p">,</span>  
    <span class="s2">"timestamp: SOME_STRING_VALUE"</span>  
  <span class="p">),</span>  
<span class="p">));</span>  

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  
<span class="nv">$err</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>  

<span class="k">if</span> <span class="p">(</span><span class="nv">$err</span><span class="p">)</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="s2">"cURL Error #:"</span> <span class="o">.</span> <span class="nv">$err</span><span class="p">;</span>  
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
  <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>  
<span class="p">}</span>

</pre>
<pre class="highlight csharp"><span class="n">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestClient</span><span class="p">(</span><span class="s">"/api/v3/purchases/otps/auths"</span><span class="p">);</span>  
<span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RestRequest</span><span class="p">(</span><span class="n">Method</span><span class="p">.</span><span class="n">POST</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authkeyversion"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signaturemethod"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"signature"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"nonce"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"timestamp"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"authorization"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span> <span class="s">"SOME_STRING_VALUE"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddHeader</span><span class="p">(</span><span class="s">"accept"</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">);</span>  
<span class="n">request</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"SOME_STRING_VALUE"</span><span class="p">,</span> <span class="s">"{\\"</span><span class="n">paymentId</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">authData</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">",\\"</span><span class="n">otp</span><span class="err">\\</span><span class="s">":\\"</span><span class="p">&lt;</span><span class="n">ADD</span> <span class="n">STRING</span> <span class="n">VALUE</span><span class="p">&gt;</span><span class="err">\\</span><span class="s">"}"</span><span class="p">,</span> <span class="n">ParameterType</span><span class="p">.</span><span class="n">RequestBody</span><span class="p">);</span>  
<span class="n">IRestResponse</span> <span class="n">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

</pre>
<pre class="highlight go"><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"text/plain"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"*/*"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Access_token&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Timestamp"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Timestamp&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Nonce"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Nonce&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Signature"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;Signature&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"SignatureMethod"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" &lt;&lt;SignatureMethod&gt;&gt;"</span><span class="p">},</span><span class="x">
        </span><span class="s">"AuthKeyVersion"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">" 1"</span><span class="p">},</span><span class="x">

    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"/api/v3/purchases/otps/auths"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></pre>
<pre class="highlight java"><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"/api/v3/purchases/otps/auths"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</pre>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="err">:</span><span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span><span class="err">:</span><span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="err">:</span><span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span><span class="err">:</span><span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span><span class="err">:</span><span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span><span class="err">:</span><span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span><span class="err">:</span><span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span><span class="err">:</span><span class="s1">' 1'</span>

<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/api/v3/purchases/otps/auths'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">})</span>

</pre>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'text/plain'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'*/*'</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">' application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Nonce'</span><span class="p">:</span> <span class="s">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'Signature'</span><span class="p">:</span> <span class="s">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'SignatureMethod'</span><span class="p">:</span> <span class="s">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s">'AuthKeyVersion'</span><span class="p">:</span> <span class="s">' 1'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/api/v3/purchases/otps/auths'</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>

<span class="p">},</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'*/*'</span><span class="p">,</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">' application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Access_token&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Timestamp'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Timestamp&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Nonce'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Nonce&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'Signature'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;Signature&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'SignatureMethod'</span> <span class="o">=&gt;</span> <span class="s1">' &lt;&lt;SignatureMethod&gt;&gt;'</span><span class="p">,</span>
  <span class="s1">'AuthKeyVersion'</span> <span class="o">=&gt;</span> <span class="s1">' 1'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'/api/v3/purchases/otps/auths'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre>

<p><code class="prettyprint">POST /api/v3/purchases/otps/auths</code></p>

<p><em>This is used to validate a transaction which requires an OTP for 2FA</em></p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="s2">"{{paymentId}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authData"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;&lt;AUTH</span><span class="w"> </span><span class="err">DATA&gt;&gt;</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"otp"</span><span class="p">:</span><span class="s2">"&lt;&lt;OTP&gt;&gt;"</span><span class="w">               
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="post_api-v3-purchases-otps-auths-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>application/json</td>
</tr>
<tr>
<td>Authorization</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#getting-a-bearer-token">here</a> to get started on setting up a Bearer Authorization token</td>
</tr>
<tr>
<td>Timestamp</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The current time in <a href="https://www.unixtimestamp.com/">unix timestamps</a> when the transaction happened</td>
</tr>
<tr>
<td>Nonce</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#nonce">here</a> for more info</td>
</tr>
<tr>
<td>Signature</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>Reference <a href="#signatures">here</a> for more info</td>
</tr>
<tr>
<td>SignatureMethod</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>The hashing method the signature is encoded in.</td>
</tr>
<tr>
<td>AuthKeyVersion</td>
<td>header</td>
<td>string</td>
<td>true</td>
<td>By default, <strong><em>1.0</em></strong></td>
</tr>
</tbody></table>

<h3 id="get_api-v3-purchases-responses">Request Body</h3>
 

<blockquote>
<p>Sample Response </p>
</blockquote>
<pre class="highlight plaintext">

</pre>

<blockquote>
<p>Error Response</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XS1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your payment has exceeded the time required to pay"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;&lt;PAYMENT ID&gt;&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>paymentId</td>
<td>body</td>
<td>number</td>
<td>The payment identifier for the transaction</td>
</tr>
<tr>
<td>authData</td>
<td>body</td>
<td>string</td>
<td>Reference <a href="#authdata">here</a> for details on generating the authData hash</td>
</tr>
<tr>
<td>otp</td>
<td>body</td>
<td>string</td>
<td>The OTP code required to validate the transaction</td>
</tr>
</tbody></table>

<h3 id="post_api-v3-purchases-otps-auths-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>default</td>
<td>Default</td>
<td>Default response</td>
<td>Inline</td>
</tr>
</tbody></table>

<p><aside class="warning">
This operation requires the following details to be configured properly.
<ol> 
<li><a href="#authdata">Auth Data</a></li>
<li> <a href="#opIdPOST_passport-oauth-token">Bearer Authorization</a> must have been obtained </li>
<li> Ensure you update the signature, more details <a href="#signatures">here</a>, same for the <a href="#nonce">nonce</a>  </li></p>

<p></ol>
</aside></p>

          <h1 id='http-codes'>HTTP Codes</h1>
<p><aside class="notice">This contains docs on our HTTP error codes and their descriptions</aside></p>

<p>The IPG API uses the following HTTP codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK  - Your request was successful, great job!</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request needs a bit of work</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The requested API has some wrong keys in there!</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified request could not be found</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>501</td>
<td>Not Implemented &ndash; We&rsquo;re not doing this yet!. Please try again later.</td>
</tr>
</tbody></table>
<h1 id='transaction-response-codes'>Transaction Response Codes</h1>
<table><thead>
<tr>
<th>S/N</th>
<th>Response Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>E10</td>
<td>The service field tag has not been populated.  Please ask Interswitch Support for more help.</td>
</tr>
<tr>
<td>2</td>
<td>E11</td>
<td>This requests expects a transactionType field to be set and it is not.  Please ask Interswitch Support for more help</td>
</tr>
<tr>
<td>3</td>
<td>E12</td>
<td>SecurityToken header is missing.</td>
</tr>
<tr>
<td>4</td>
<td>E13</td>
<td>Username or password is wrong.</td>
</tr>
<tr>
<td>5</td>
<td>E14</td>
<td>Missing content type header.</td>
</tr>
<tr>
<td>6</td>
<td>E15</td>
<td>The transaction you are trying to do is not supported</td>
</tr>
<tr>
<td>7</td>
<td>E16</td>
<td>The service you have specified is not available</td>
</tr>
<tr>
<td>8</td>
<td>E17</td>
<td>The service provider you have specified has not been set up on the platform.</td>
</tr>
<tr>
<td>9</td>
<td>E18</td>
<td>The service is unreachable at the moment</td>
</tr>
<tr>
<td>10</td>
<td>E19</td>
<td>A bad response was received from service provider</td>
</tr>
<tr>
<td>11</td>
<td>E20</td>
<td>Your request has timed out</td>
</tr>
<tr>
<td>12</td>
<td>E21</td>
<td>An unknown error has occurred. Please ask Interswitch Support for more help.</td>
</tr>
<tr>
<td>13</td>
<td>E22</td>
<td>Access key has not been supplied. Ensure the Authorization header has been set appropriately.</td>
</tr>
<tr>
<td>14</td>
<td>E23</td>
<td>Nonce has not been supplied. Ensure the Nonce header has been set appropriately.</td>
</tr>
<tr>
<td>15</td>
<td>E24</td>
<td>Please synchronize your time with the server and ensure your time is not outside of 30mins of the Server local time. The standard time zone used is GMT</td>
</tr>
<tr>
<td>16</td>
<td>E25</td>
<td>Nonce has already been used</td>
</tr>
<tr>
<td>17</td>
<td>E26</td>
<td>Signature failed for this request.  Please ask Interswitch Support for more help.</td>
</tr>
<tr>
<td>18</td>
<td>E27</td>
<td>An unknown error occured during Authentication.  Please ask Interswitch Support for more help.</td>
</tr>
<tr>
<td>19</td>
<td>E28</td>
<td>Your credentials do not have access to this resource</td>
</tr>
<tr>
<td>20</td>
<td>E29</td>
<td>Timestamp is missing in your header</td>
</tr>
<tr>
<td>21</td>
<td>E30</td>
<td>SecurityToken header is bad.</td>
</tr>
<tr>
<td>22</td>
<td>E31</td>
<td>XML data is badly formatted</td>
</tr>
<tr>
<td>23</td>
<td>E32</td>
<td>JSON data is badly formatted</td>
</tr>
<tr>
<td>24</td>
<td>E33</td>
<td>Keystore is not accessible. Contact Interswitch.</td>
</tr>
<tr>
<td>25</td>
<td>E34</td>
<td>The system is busy at the moment, please try again later.</td>
</tr>
<tr>
<td>26</td>
<td>E35</td>
<td>Bad request to service provider. Contact Interswitch.</td>
</tr>
<tr>
<td>26</td>
<td>E36</td>
<td>Bad request to service processor. Contact Interswitch.</td>
</tr>
<tr>
<td>27</td>
<td>E37</td>
<td>Bad request from client. Kindly check your message.</td>
</tr>
<tr>
<td>28</td>
<td>E38</td>
<td>Bad response from service provider. Contact Interswitch.</td>
</tr>
<tr>
<td>29</td>
<td>E39</td>
<td>Bad response from service processor. Contact Interswitch.</td>
</tr>
<tr>
<td>30</td>
<td>E40</td>
<td>Bad response to client. Contact Interswitch.</td>
</tr>
<tr>
<td>31</td>
<td>E41</td>
<td>Bad request from client. Kindly check your message.</td>
</tr>
</tbody></table>

          <h1 id='test-transaction-details'>Test Transaction Details</h1><h2 id='test-card-details'>Test Card Details</h2>
<table><thead>
<tr>
<th>Description</th>
<th>PAN</th>
<th>Expiry Date</th>
<th>PIN</th>
<th>CVC</th>
</tr>
</thead><tbody>
<tr>
<td>Successful Transaction Verve Test Card (No OTP)</td>
<td>5061030000000000084</td>
<td>Sept 2019</td>
<td>1234</td>
<td>123</td>
</tr>
<tr>
<td></td>
<td>6280511000000095</td>
<td>Dec 2026</td>
<td>0000</td>
<td>123</td>
</tr>
<tr>
<td>Insufficient Funds Verve Test Card</td>
<td>5061030000000000027</td>
<td>Sept 2019</td>
<td>1234</td>
<td>123</td>
</tr>
<tr>
<td>VISA Test Card (iPIN)</td>
<td>4000000000000002</td>
<td>Apr 2020</td>
<td><No PIN></td>
<td>123</td>
</tr>
<tr>
<td>Incorrect PIN (Masked as “Transaction Error”) Verve Test Card</td>
<td>5061030000000000035</td>
<td>Sept 2019</td>
<td>0000</td>
<td>123</td>
</tr>
<tr>
<td>AutoEnrollment Test Card (Response Code ‘M0’ returned)</td>
<td>5061040000000000231</td>
<td>Jan 2019</td>
<td>1234</td>
<td>123</td>
</tr>
<tr>
<td>Successful Transaction Verve Test Card (OTP)</td>
<td>Kindly request for a test card to be configured for you, so as to receive OTP via email.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id='test-merchant-details'>Test Merchant Details</h2>
<table><thead>
<tr>
<th>Client ID</th>
<th>Secret Key</th>
<th>Merchant Code</th>
<th>Requestor ID</th>
</tr>
</thead><tbody>
<tr>
<td>IKIA9614B82064D632E9B6418DF358A6A4AEA84D7218</td>
<td>XCTiBtLy1G9chAnyg0z3BcaFK4cVpwDg/GTw2EmjTZ8=</td>
<td>MX187</td>
<td>00117614992</td>
</tr>
<tr>
<td>IKIACA67D931869E40BE07EE418A0B07A4A6D9EEF588</td>
<td>y0FISAGAS+OSIASec5Cts/khsWVXaWCoxZcLF2d8o/A=</td>
<td>MX1209</td>
<td>None</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="go">Go</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="javascript">JavaScript</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="csharp">C#</a>
                <a href="#" data-language-name="c">Swift</a>
                <a href="#" data-language-name="objective_c">Objective-C</a>
                <a href="#" data-language-name="php">PHP</a>
          </div>
      </div>
    </div>
  </body>
</html>
